{"ast":null,"code":"import _defineProperty from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import*as api from\"../utils\";import ErrorDisplay from\"./ErrorDisplay\";var CommentForm=/*#__PURE__*/function(_Component){_inherits(CommentForm,_Component);var _super=_createSuper(CommentForm);function CommentForm(){var _this;_classCallCheck(this,CommentForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={commentInput:\"\",postError:null};_this.handleChange=function(event){var _event$target=event.target,value=_event$target.value,name=_event$target.name;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(event){event.preventDefault();var _this$props=_this.props,article_id=_this$props.article_id,addComment=_this$props.addComment;var commentInput=_this.state.commentInput;var newComment={username:_this.props.username,body:commentInput};api.postComment(newComment,article_id).then(function(comment){addComment(comment);}).catch(function(err){_this.setState({postError:{status:err.response.status,msg:err.response.data.message}});});_this.setState({commentInput:\"\"});};return _this;}_createClass(CommentForm,[{key:\"render\",value:function render(){var _this$state=this.state,commentInput=_this$state.commentInput,postError=_this$state.postError;var username=this.props.username;if(postError)return/*#__PURE__*/React.createElement(ErrorDisplay,{status:postError.status,msg:postError.msg});return/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit,id:\"commentForm\"},/*#__PURE__*/React.createElement(\"label\",{className:\"username\"},\"Username:\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"usernameInput\",value:username,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"label\",{className:\"comment\"},/*#__PURE__*/React.createElement(\"textarea\",{type:\"text\",placeholder:\"have your say..\",name:\"commentInput\",value:commentInput,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"button\",null,\"Submit\"));}}]);return CommentForm;}(Component);export default CommentForm;","map":{"version":3,"sources":["/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/src/components/CommentForm.jsx"],"names":["React","Component","api","ErrorDisplay","CommentForm","state","commentInput","postError","handleChange","event","target","value","name","setState","handleSubmit","preventDefault","props","article_id","addComment","newComment","username","body","postComment","then","comment","catch","err","status","response","msg","data","message"],"mappings":"k2BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,UAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,C,GAEMC,CAAAA,W,+UACJC,K,CAAQ,CACNC,YAAY,CAAE,EADR,CAENC,SAAS,CAAE,IAFL,C,OAmCRC,Y,CAAe,SAACC,KAAD,CAAW,mBACAA,KAAK,CAACC,MADN,CAChBC,KADgB,eAChBA,KADgB,CACTC,IADS,eACTA,IADS,CAGxB,MAAKC,QAAL,oBAAiBD,IAAjB,CAAwBD,KAAxB,GACD,C,OAEDG,Y,CAAe,SAACL,KAAD,CAAW,CACxBA,KAAK,CAACM,cAAN,GADwB,gBAEW,MAAKC,KAFhB,CAEhBC,UAFgB,aAEhBA,UAFgB,CAEJC,UAFI,aAEJA,UAFI,IAGhBZ,CAAAA,YAHgB,CAGC,MAAKD,KAHN,CAGhBC,YAHgB,CAIxB,GAAMa,CAAAA,UAAU,CAAG,CAAEC,QAAQ,CAAE,MAAKJ,KAAL,CAAWI,QAAvB,CAAiCC,IAAI,CAAEf,YAAvC,CAAnB,CACAJ,GAAG,CACAoB,WADH,CACeH,UADf,CAC2BF,UAD3B,EAEGM,IAFH,CAEQ,SAACC,OAAD,CAAa,CACjBN,UAAU,CAACM,OAAD,CAAV,CACD,CAJH,EAKGC,KALH,CAKS,SAACC,GAAD,CAAS,CACd,MAAKb,QAAL,CAAc,CACZN,SAAS,CAAE,CACToB,MAAM,CAAED,GAAG,CAACE,QAAJ,CAAaD,MADZ,CAETE,GAAG,CAAEH,GAAG,CAACE,QAAJ,CAAaE,IAAb,CAAkBC,OAFd,CADC,CAAd,EAMD,CAZH,EAcA,MAAKlB,QAAL,CAAc,CAAEP,YAAY,CAAE,EAAhB,CAAd,EACD,C,8EAzDQ,iBAC6B,KAAKD,KADlC,CACCC,YADD,aACCA,YADD,CACeC,SADf,aACeA,SADf,IAECa,CAAAA,QAFD,CAEc,KAAKJ,KAFnB,CAECI,QAFD,CAGP,GAAIb,SAAJ,CACE,mBAAO,oBAAC,YAAD,EAAc,MAAM,CAAEA,SAAS,CAACoB,MAAhC,CAAwC,GAAG,CAAEpB,SAAS,CAACsB,GAAvD,EAAP,CACF,mBACE,4BAAM,QAAQ,CAAE,KAAKf,YAArB,CAAmC,EAAE,CAAC,aAAtC,eACE,6BAAO,SAAS,CAAC,UAAjB,2BAEE,6BACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,eAFP,CAGE,KAAK,CAAEM,QAHT,CAIE,QAAQ,CAAE,KAAKZ,YAJjB,EAFF,CADF,cAWE,6BAAO,SAAS,CAAC,SAAjB,eACE,gCACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,iBAFd,CAGE,IAAI,CAAC,cAHP,CAIE,KAAK,CAAEF,YAJT,CAKE,QAAQ,CAAE,KAAKE,YALjB,EADF,CAXF,cAqBE,2CArBF,CADF,CAyBD,C,yBAnCuBP,S,EAiE1B,cAAeG,CAAAA,WAAf","sourcesContent":["import React, { Component } from \"react\";\nimport * as api from \"../utils\";\nimport ErrorDisplay from \"./ErrorDisplay\";\n\nclass CommentForm extends Component {\n  state = {\n    commentInput: \"\",\n    postError: null,\n  };\n  render() {\n    const { commentInput, postError } = this.state;\n    const { username } = this.props;\n    if (postError)\n      return <ErrorDisplay status={postError.status} msg={postError.msg} />;\n    return (\n      <form onSubmit={this.handleSubmit} id=\"commentForm\">\n        <label className=\"username\">\n          Username:\n          <input\n            type=\"text\"\n            name=\"usernameInput\"\n            value={username}\n            onChange={this.handleChange}\n          />\n        </label>\n\n        <label className=\"comment\">\n          <textarea\n            type=\"text\"\n            placeholder=\"have your say..\"\n            name=\"commentInput\"\n            value={commentInput}\n            onChange={this.handleChange}\n          />\n        </label>\n\n        <button>Submit</button>\n      </form>\n    );\n  }\n  handleChange = (event) => {\n    const { value, name } = event.target;\n\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const { article_id, addComment } = this.props;\n    const { commentInput } = this.state;\n    const newComment = { username: this.props.username, body: commentInput };\n    api\n      .postComment(newComment, article_id)\n      .then((comment) => {\n        addComment(comment);\n      })\n      .catch((err) => {\n        this.setState({\n          postError: {\n            status: err.response.status,\n            msg: err.response.data.message,\n          },\n        });\n      });\n\n    this.setState({ commentInput: \"\" });\n  };\n}\n\nexport default CommentForm;\n"]},"metadata":{},"sourceType":"module"}