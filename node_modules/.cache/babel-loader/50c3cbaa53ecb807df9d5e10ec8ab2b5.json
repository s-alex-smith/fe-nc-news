{"ast":null,"code":"import _classCallCheck from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Loader from\"./Loader\";import*as api from\"../utils\";import ArticleCard from\"./ArticleCard\";import\"../styles/global.css\";import ErrorDisplay from\"./ErrorDisplay\";import SortArticlesForm from\"./SortArticlesForm\";var ArticleList=/*#__PURE__*/function(_Component){_inherits(ArticleList,_Component);var _super=_createSuper(ArticleList);function ArticleList(){var _this;_classCallCheck(this,ArticleList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={articles:[],isLoading:true,sort_by:\"\",order:\"desc\",topicError:null};_this.componentDidMount=function(){_this.fetchArticles();};_this.componentDidUpdate=function(prevProps,prevState){if(prevProps.topic!==_this.props.topic||prevState.sort_by!==_this.state.sort_by||prevState.order!==_this.state.order){_this.fetchArticles();}};_this.handleChangeSortBy=function(event){_this.setState({sort_by:event.target.value});};_this.handleChangeOrder=function(event){_this.setState({order:event.target.value});};_this.fetchArticles=function(){var topic=_this.props.topic;var _this$state=_this.state,sort_by=_this$state.sort_by,order=_this$state.order;api.getArticles({topic:topic,sort_by:sort_by,order:order}).then(function(articles){_this.setState({articles:articles,isLoading:false});}).catch(function(err){console.dir(err);_this.setState({topicError:{status:err.response.status,msg:err.response.data.message},isLoading:false});});};return _this;}_createClass(ArticleList,[{key:\"render\",value:function render(){var _this$state2=this.state,articles=_this$state2.articles,isLoading=_this$state2.isLoading,sort_by=_this$state2.sort_by,order=_this$state2.order,topicError=_this$state2.topicError;if(isLoading)return/*#__PURE__*/React.createElement(Loader,null);if(topicError)return/*#__PURE__*/React.createElement(ErrorDisplay,{status:topicError.status,msg:topicError.msg});return/*#__PURE__*/React.createElement(\"main\",{className:\"mainBody\"},/*#__PURE__*/React.createElement(SortArticlesForm,{sort_by:sort_by,order:order,handleChangeOrder:this.handleChangeOrder,handleChangeSortBy:this.handleChangeSortBy}),articles.map(function(article){return/*#__PURE__*/React.createElement(ArticleCard,{article:article,key:article.article_id});}));}}]);return ArticleList;}(Component);export default ArticleList;","map":{"version":3,"sources":["/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/src/components/ArticleList.jsx"],"names":["React","Component","Loader","api","ArticleCard","ErrorDisplay","SortArticlesForm","ArticleList","state","articles","isLoading","sort_by","order","topicError","componentDidMount","fetchArticles","componentDidUpdate","prevProps","prevState","topic","props","handleChangeSortBy","event","setState","target","value","handleChangeOrder","getArticles","then","catch","err","console","dir","status","response","msg","data","message","map","article","article_id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Loader from \"./Loader\";\nimport * as api from \"../utils\";\nimport ArticleCard from \"./ArticleCard\";\nimport \"../styles/global.css\";\nimport ErrorDisplay from \"./ErrorDisplay\";\nimport SortArticlesForm from \"./SortArticlesForm\";\n\nclass ArticleList extends Component {\n  state = {\n    articles: [],\n    isLoading: true,\n    sort_by: \"\",\n    order: \"desc\",\n    topicError: null,\n  };\n\n  componentDidMount = () => {\n    this.fetchArticles();\n  };\n\n  componentDidUpdate = (prevProps, prevState) => {\n    if (\n      prevProps.topic !== this.props.topic ||\n      prevState.sort_by !== this.state.sort_by ||\n      prevState.order !== this.state.order\n    ) {\n      this.fetchArticles();\n    }\n  };\n\n  render() {\n    const { articles, isLoading, sort_by, order, topicError } = this.state;\n    if (isLoading) return <Loader />;\n    if (topicError)\n      return <ErrorDisplay status={topicError.status} msg={topicError.msg} />;\n    return (\n      <main className=\"mainBody\">\n        <SortArticlesForm\n          sort_by={sort_by}\n          order={order}\n          handleChangeOrder={this.handleChangeOrder}\n          handleChangeSortBy={this.handleChangeSortBy}\n        />\n        {articles.map((article) => {\n          return <ArticleCard article={article} key={article.article_id} />;\n        })}\n      </main>\n    );\n  }\n\n  handleChangeSortBy = (event) => {\n    this.setState({ sort_by: event.target.value });\n  };\n\n  handleChangeOrder = (event) => {\n    this.setState({ order: event.target.value });\n  };\n\n  fetchArticles = () => {\n    const { topic } = this.props;\n    const { sort_by, order } = this.state;\n    api\n      .getArticles({ topic, sort_by, order })\n      .then((articles) => {\n        this.setState({ articles, isLoading: false });\n      })\n      .catch((err) => {\n        console.dir(err);\n        this.setState({\n          topicError: {\n            status: err.response.status,\n            msg: err.response.data.message,\n          },\n          isLoading: false,\n        });\n      });\n  };\n}\n\nexport default ArticleList;\n"]},"metadata":{},"sourceType":"module"}