{"ast":null,"code":"import _toConsumableArray from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import*as api from\"../utils\";import CommentCard from\"./CommentCard\";import Loader from\"./Loader\";import CommentForm from\"./CommentForm\";import ErrorDisplay from\"./ErrorDisplay\";var Comments=/*#__PURE__*/function(_Component){_inherits(Comments,_Component);var _super=_createSuper(Comments);function Comments(){var _this;_classCallCheck(this,Comments);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={comments:[],isLoading:true,commentError:null};_this.componentDidMount=function(){_this.fetchComments();};_this.fetchComments=function(){var article_id=_this.props.article_id;api.getComments({article_id:article_id}).then(function(comments){_this.setState({comments:comments,isLoading:false});}).catch(function(err){_this.setState({commentError:{status:err.response.status,msg:err.response.data.message}});});};_this.addComment=function(newComment){_this.setState(function(_ref){var comments=_ref.comments;return{comments:[].concat(_toConsumableArray(comments),[newComment])};});};_this.removeComment=function(deletedComment_id){_this.setState(function(currentState){return{comments:currentState.comments.filter(function(comment){return comment.comment_id!==deletedComment_id;})};});};return _this;}_createClass(Comments,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,comments=_this$state.comments,isLoading=_this$state.isLoading,commentError=_this$state.commentError;var article_id=this.props.article_id;if(commentError)return/*#__PURE__*/React.createElement(ErrorDisplay,{status:commentError.status,msg:commentError.msg});if(isLoading)return/*#__PURE__*/React.createElement(Loader,null);return/*#__PURE__*/React.createElement(\"div\",{className:\"commentCard\"},/*#__PURE__*/React.createElement(\"ul\",null,comments.map(function(comment){return/*#__PURE__*/React.createElement(CommentCard,{comment:comment,username:_this2.props.username,key:comment.comment_id,removeComment:_this2.removeComment});}),/*#__PURE__*/React.createElement(CommentForm,{article_id:article_id,addComment:this.addComment,username:this.props.username})));}}]);return Comments;}(Component);export default Comments;","map":{"version":3,"sources":["/home/alex/Desktop/northcoders/week-12/fe-nc-news/nc-news/src/components/Comments.jsx"],"names":["React","Component","api","CommentCard","Loader","CommentForm","ErrorDisplay","Comments","state","comments","isLoading","commentError","componentDidMount","fetchComments","article_id","props","getComments","then","setState","catch","err","status","response","msg","data","message","addComment","newComment","removeComment","deletedComment_id","currentState","filter","comment","comment_id","map","username"],"mappings":"w2BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,UAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,C,GAEMC,CAAAA,Q,mUACJC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,CAENC,SAAS,CAAE,IAFL,CAGNC,YAAY,CAAE,IAHR,C,OAMRC,iB,CAAoB,UAAM,CACxB,MAAKC,aAAL,GACD,C,OAgCDA,a,CAAgB,UAAM,IACZC,CAAAA,UADY,CACG,MAAKC,KADR,CACZD,UADY,CAEpBZ,GAAG,CACAc,WADH,CACe,CAAEF,UAAU,CAAVA,UAAF,CADf,EAEGG,IAFH,CAEQ,SAACR,QAAD,CAAc,CAClB,MAAKS,QAAL,CAAc,CAAET,QAAQ,CAARA,QAAF,CAAYC,SAAS,CAAE,KAAvB,CAAd,EACD,CAJH,EAKGS,KALH,CAKS,SAACC,GAAD,CAAS,CACd,MAAKF,QAAL,CAAc,CACZP,YAAY,CAAE,CACZU,MAAM,CAAED,GAAG,CAACE,QAAJ,CAAaD,MADT,CAEZE,GAAG,CAAEH,GAAG,CAACE,QAAJ,CAAaE,IAAb,CAAkBC,OAFX,CADF,CAAd,EAMD,CAZH,EAaD,C,OAEDC,U,CAAa,SAACC,UAAD,CAAgB,CAC3B,MAAKT,QAAL,CAAc,cAAkB,IAAfT,CAAAA,QAAe,MAAfA,QAAe,CAC9B,MAAO,CAAEA,QAAQ,8BAAMA,QAAN,GAAgBkB,UAAhB,EAAV,CAAP,CACD,CAFD,EAGD,C,OAEDC,a,CAAgB,SAACC,iBAAD,CAAuB,CACrC,MAAKX,QAAL,CAAc,SAACY,YAAD,CAAkB,CAC9B,MAAO,CACLrB,QAAQ,CAAEqB,YAAY,CAACrB,QAAb,CAAsBsB,MAAtB,CACR,SAACC,OAAD,QAAaA,CAAAA,OAAO,CAACC,UAAR,GAAuBJ,iBAApC,EADQ,CADL,CAAP,CAKD,CAND,EAOD,C,2EA7DQ,iCACuC,KAAKrB,KAD5C,CACCC,QADD,aACCA,QADD,CACWC,SADX,aACWA,SADX,CACsBC,YADtB,aACsBA,YADtB,IAECG,CAAAA,UAFD,CAEgB,KAAKC,KAFrB,CAECD,UAFD,CAGP,GAAIH,YAAJ,CACE,mBACE,oBAAC,YAAD,EAAc,MAAM,CAAEA,YAAY,CAACU,MAAnC,CAA2C,GAAG,CAAEV,YAAY,CAACY,GAA7D,EADF,CAGF,GAAIb,SAAJ,CAAe,mBAAO,oBAAC,MAAD,MAAP,CACf,mBACE,2BAAK,SAAS,CAAC,aAAf,eACE,8BACGD,QAAQ,CAACyB,GAAT,CAAa,SAACF,OAAD,CAAa,CACzB,mBACE,oBAAC,WAAD,EACE,OAAO,CAAEA,OADX,CAEE,QAAQ,CAAE,MAAI,CAACjB,KAAL,CAAWoB,QAFvB,CAGE,GAAG,CAAEH,OAAO,CAACC,UAHf,CAIE,aAAa,CAAE,MAAI,CAACL,aAJtB,EADF,CAQD,CATA,CADH,cAWE,oBAAC,WAAD,EACE,UAAU,CAAEd,UADd,CAEE,UAAU,CAAE,KAAKY,UAFnB,CAGE,QAAQ,CAAE,KAAKX,KAAL,CAAWoB,QAHvB,EAXF,CADF,CADF,CAqBD,C,sBAxCoBlC,S,EA2EvB,cAAeM,CAAAA,QAAf","sourcesContent":["import React, { Component } from \"react\";\nimport * as api from \"../utils\";\nimport CommentCard from \"./CommentCard\";\nimport Loader from \"./Loader\";\nimport CommentForm from \"./CommentForm\";\nimport ErrorDisplay from \"./ErrorDisplay\";\n\nclass Comments extends Component {\n  state = {\n    comments: [],\n    isLoading: true,\n    commentError: null,\n  };\n\n  componentDidMount = () => {\n    this.fetchComments();\n  };\n\n  render() {\n    const { comments, isLoading, commentError } = this.state;\n    const { article_id } = this.props;\n    if (commentError)\n      return (\n        <ErrorDisplay status={commentError.status} msg={commentError.msg} />\n      );\n    if (isLoading) return <Loader />;\n    return (\n      <div className=\"commentCard\">\n        <ul>\n          {comments.map((comment) => {\n            return (\n              <CommentCard\n                comment={comment}\n                username={this.props.username}\n                key={comment.comment_id}\n                removeComment={this.removeComment}\n              />\n            );\n          })}\n          <CommentForm\n            article_id={article_id}\n            addComment={this.addComment}\n            username={this.props.username}\n          />\n        </ul>\n      </div>\n    );\n  }\n  fetchComments = () => {\n    const { article_id } = this.props;\n    api\n      .getComments({ article_id })\n      .then((comments) => {\n        this.setState({ comments, isLoading: false });\n      })\n      .catch((err) => {\n        this.setState({\n          commentError: {\n            status: err.response.status,\n            msg: err.response.data.message,\n          },\n        });\n      });\n  };\n\n  addComment = (newComment) => {\n    this.setState(({ comments }) => {\n      return { comments: [...comments, newComment] };\n    });\n  };\n\n  removeComment = (deletedComment_id) => {\n    this.setState((currentState) => {\n      return {\n        comments: currentState.comments.filter(\n          (comment) => comment.comment_id !== deletedComment_id\n        ),\n      };\n    });\n  };\n}\n\nexport default Comments;\n"]},"metadata":{},"sourceType":"module"}